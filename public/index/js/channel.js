;(function($){$.fn.kxbdSuperMarquee=function(options){var opts=$.extend({},$.fn.kxbdSuperMarquee.defaults,options);return this.each(function(){var $marquee=$(this);var _scrollObj=$marquee.get(0);var scrollW=$marquee.width();var scrollH=$marquee.height();var $element=$marquee.children();var $kids=$element.children();var scrollSize=opts.scrollSize;var _type=(opts.direction=='left'||opts.direction=='right')?1:0;var scrollId,rollId,isMove,marqueeId;var t,b,c,d,e;var _size,_len;var $nav,$navBtns;var arrPos=[];var numView=0;var numRoll=0;var numMoved=0;$element.css(_type?'width':'height',10000);var navHtml='<ul>';if(opts.isEqual){_size=$kids[_type?'outerWidth':'outerHeight']();_len=$kids.length;if(scrollSize===0){scrollSize=_size*_len;}
for(var i=0;i<_len;i++){arrPos.push(i*_size);navHtml+='<li>'+(i+1)+'</li>';}}else{scrollSize=0;$kids.each(function(i){arrPos.push(scrollSize);scrollSize+=$(this)[_type?'outerWidth':'outerHeight']();navHtml+='<li>'+(i+1)+'</li>';});}
navHtml+='</ul>';if(scrollSize<(_type?scrollW:scrollH))return;$element.append($kids.clone()).css(_type?'width':'height',scrollSize*2);if(opts.navId){$nav=$(opts.navId).append(navHtml).hover(stop,start);$navBtns=$('li',$nav);$navBtns.each(function(i){$(this).bind(opts.eventNav,function(){if(isMove)return;if(numView==i)return;rollFunc(arrPos[i]);$navBtns.eq(numView).removeClass('navOn');numView=i;$(this).addClass('navOn');});});$navBtns.eq(numView).addClass('navOn');}
if(opts.direction=='right'||opts.direction=='down'){_scrollObj[_type?'scrollLeft':'scrollTop']=scrollSize;}else{_scrollObj[_type?'scrollLeft':'scrollTop']=0;}
if(opts.isMarquee){marqueeId=setTimeout(scrollFunc,opts.scrollDelay);$marquee.hover(function(){clearInterval(marqueeId);},function(){clearInterval(marqueeId);marqueeId=setTimeout(scrollFunc,opts.scrollDelay);});if(opts.controlBtn){$.each(opts.controlBtn,function(i,val){$(val).bind(opts.eventA,function(){opts.direction=i;opts.oldAmount=opts.scrollAmount;opts.scrollAmount=opts.newAmount;}).bind(opts.eventB,function(){opts.scrollAmount=opts.oldAmount;});});}}else{if(opts.isAuto){start();$marquee.hover(stop,start);}
if(opts.btnGo){$.each(opts.btnGo,function(i,val){$(val).bind(opts.eventGo,function(){if(isMove===true)return;opts.direction=i;rollFunc();if(opts.isAuto){stop();start();}});});}}
function scrollFunc(){var _dir=(opts.direction=='left'||opts.direction=='right')?'scrollLeft':'scrollTop',newPos=0;if(opts.isMarquee){if(opts.loop>0){numMoved+=opts.scrollAmount;if(numMoved>scrollSize*opts.loop){_scrollObj[_dir]=0;return clearInterval(marqueeId);}}
newPos=_scrollObj[_dir]+(opts.direction=='left'||opts.direction=='up'?1:-1)*opts.scrollAmount;}else{if(opts.duration){if(t++<d){isMove=true;newPos=Math.ceil(easeOutQuad(t,b,c,d));if(t==d){newPos=e;}}else{newPos=e;clearInterval(scrollId);isMove=false;return;}}else{newPos=e;clearInterval(scrollId);}}
if(opts.direction=='left'||opts.direction=='up'){if(newPos>=scrollSize){newPos-=scrollSize;}}else{if(newPos<=0){newPos+=scrollSize;}}
_scrollObj[_dir]=newPos;if(opts.isMarquee){marqueeId=setTimeout(scrollFunc,opts.scrollDelay);}else if(t<d){if(scrollId)clearTimeout(scrollId);scrollId=setTimeout(scrollFunc,opts.scrollDelay);}else{isMove=false;}}
function rollFunc(pPos){isMove=true;var _dir=(opts.direction=='left'||opts.direction=='right')?'scrollLeft':'scrollTop';var _neg=opts.direction=='left'||opts.direction=='up'?1:-1;numRoll=numRoll+_neg;if(pPos===undefined&&opts.navId){$navBtns.eq(numView).removeClass('navOn');numView+=_neg;if(numView>=_len){numView=0;}else if(numView<0){numView=_len-1;}
$navBtns.eq(numView).addClass('navOn');numRoll=numView;}
var _temp=numRoll<0?scrollSize:0;t=0;b=_scrollObj[_dir];e=(pPos!==undefined)?pPos:_temp+(opts.distance*numRoll)%scrollSize;if(_neg==1){if(e>b){c=e-b;}else{c=e+scrollSize-b;}}else{if(e>b){c=e-scrollSize-b;}else{c=e-b;}}
d=opts.duration;if(scrollId)clearTimeout(scrollId);scrollId=setTimeout(scrollFunc,opts.scrollDelay);}
function start(){rollId=setInterval(function(){rollFunc();},opts.time*1000);}
function stop(){clearInterval(rollId);}
function easeOutQuad(t,b,c,d){return-c*(t/=d)*(t-2)+b;}
function easeOutQuint(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;}});};$.fn.kxbdSuperMarquee.defaults={isMarquee:false,scrollSize:0,isEqual:true,loop:0,newAmount:3,eventA:'mousedown',eventB:'mouseup',isAuto:true,time:5,duration:50,eventGo:'click',direction:'left',scrollAmount:1,scrollDelay:10,eventNav:'click'};$.fn.kxbdSuperMarquee.setDefaults=function(settings){$.extend($.fn.kxbdSuperMarquee.defaults,settings);};})(jQuery);;(function($){var _util=CS.util,_dialog=CS.dialog;var _nodes={},_searchUrl='',_defaultInputValue="书名",_searchTypeHoverCss='';function init(searchUrl,searchTypeHoverCss){_searchUrl=searchUrl;if(searchTypeHoverCss){_searchTypeHoverCss=searchTypeHoverCss;}
_nodes={'searchInput':$('#searchInput'),'searchTypeBox':$('#searchTypeBox'),'searchType':$('#searchType'),'searchTypeDropdown':$('#searchTypeDropdown'),'searchBtn':$('#searchBtn')};_bindEvent();}
function _bindEvent(){var $showSearchTypeDropdownBtn=_nodes.searchTypeBox.length>0?_nodes.searchTypeBox:_nodes.searchType;$showSearchTypeDropdownBtn.hover(_showSearchTypeDropdown,_hideSearchTypeDropdown);_nodes.searchTypeDropdown.hover(_showSearchTypeDropdown,_hideSearchTypeDropdown);_nodes.searchTypeDropdown.find('a').on('click',function(){_nodes.searchType.html($(this).html()).attr('type',$(this).attr('type'));_nodes.searchTypeDropdown.hide();});_nodes.searchBtn.on('click',_openSearchPage);_nodes.searchInput.on('keyup',function(event){if(event.keyCode===13){return _openSearchPage();}});var defaultInputValue=_nodes.searchInput.attr("def");if(defaultInputValue){_nodes.searchInput.on('focus',function(){var $this=$(this);if($this.val()===defaultInputValue){$this.val('');}}).on('blur',function(){var $this=$(this);if($this.val()===''){$this.val(defaultInputValue);}});}}
function _showSearchTypeDropdown(){if(_searchTypeHoverCss&&!_nodes.searchType.hasClass(_searchTypeHoverCss)){_nodes.searchType.addClass(_searchTypeHoverCss);}
_nodes.searchTypeDropdown.show();}
function _hideSearchTypeDropdown(){if(_searchTypeHoverCss){_nodes.searchType.removeClass(_searchTypeHoverCss);}
_nodes.searchTypeDropdown.hide();}
function _openSearchPage(){var search_type=_nodes.searchType.attr('type'),search_value=$.trim(_nodes.searchInput.val());if(search_value.length===0||search_value===_util.sim2tra(_defaultInputValue)){_dialog.alert("请输入搜索内容");return false;}
var ref=_searchUrl.replace('p1',search_type).replace('p2',search_value);window.open(ref);return false;}
CS.util.initNameSpace("CS.searchInput");CS.searchInput={"init":init};})(jQuery);;(function($){var _util=CS.util;var _nodes={},_fixedRight=0;function init(){_nodes.$fixedRight=$('#fixedRight');_fixedRight=_nodes.$fixedRight.offset();_bindEvent();}
function _bindEvent(){$(window).scroll(function(){_util.throttle(_scrollHandler);});$("#fixedRight_closeBtn").click(function(){_nodes.$fixedRight.hide();});}
function _scrollHandler(){var offsetTop=_fixedRight.top+$(window).scrollTop()+"px";_nodes.$fixedRight.animate({top:offsetTop},{duration:500,queue:false});}
_util.initNameSpace("CS");CS.qqReadAd={'init':init};})(jQuery);;(function($){function init(){_bindEvent();}
function _bindEvent(){$('#focus').kxbdSuperMarquee({distance:259,time:4,btnGo:{left:'.aleft',right:'.aright'},direction:'left'});$(".tabid h2").click(function(){$(this).addClass("choice").siblings("h2").removeClass("choice");$(".tabid > div").eq($(".tabid h2").index(this)).show().siblings("div").hide();});$('.tab_subtab').on('click','h3',function(){var index=$(this).index(),$content=$(this).parent().next();$(this).addClass('subtab_cur').siblings('h3').removeClass('subtab_cur');$content.children().hide().eq(index).show();});}
CS.util.initNameSpace("CS.page.channel");CS.page.channel.main={"init":init};})(jQuery);