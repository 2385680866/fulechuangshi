;(function($){var _util=CS.util,_dialog=CS.dialog;var _nodes={},_params={},_defaultSearchType='chuangshi',_defaultInputValue='';function init(searchResultUrlList,searchTypeHoverCss){_params.searchResultUrlList=searchResultUrlList||{};_params.searchTypeHoverCss=searchTypeHoverCss||'search_tit_hover';_nodes={'searchInput':$('#searchInput'),'searchType':$('#searchType'),'searchTypeDropdown':$('#searchTypeDropdown'),'searchBtn':$('#searchBtn')};_defaultInputValue=_nodes.searchInput.attr("def");_bindEvent();}
function _bindEvent(){_nodes.searchType.hover(_showSearchTypeDropdown,_hideSearchTypeDropdown);_nodes.searchTypeDropdown.hover(_showSearchTypeDropdown,_hideSearchTypeDropdown);_nodes.searchTypeDropdown.find('a').on('click',function(){_nodes.searchType.html($(this).html()).attr('type',$(this).attr('type'));_nodes.searchTypeDropdown.hide();});_nodes.searchBtn.on('click',_openSearchPage);_nodes.searchInput.on('keyup',function(event){if(event.keyCode===13){return _openSearchPage();}});if(_nodes.searchInput.attr('def')){_nodes.searchInput.on('focus',function(){var $this=$(this);if($this.val()===_defaultInputValue){$this.val('');}}).on('blur',function(){var $this=$(this);if($this.val()===''){$this.val(_defaultInputValue);}});}}
function _showSearchTypeDropdown(){if(!_nodes.searchType.hasClass(_params.searchTypeHoverCss)){_nodes.searchType.addClass(_params.searchTypeHoverCss);}
_nodes.searchTypeDropdown.show();}
function _hideSearchTypeDropdown(){_nodes.searchType.removeClass(_params.searchTypeHoverCss);_nodes.searchTypeDropdown.hide();}
function _openSearchPage(){var searchType=_nodes.searchType.attr('type'),searchValue=$.trim(_nodes.searchInput.val()),searchResultUrl=_params.searchResultUrlList[searchType];if(searchValue.length===0){_dialog.alert("请输入搜索内容");return false;}
if(!searchResultUrl){return false;}
searchResultUrl=_util.replaceTpl(searchResultUrl,{'val':searchValue});window.open(searchResultUrl);return false;}
_util.initNameSpace("CS.searchInput");CS.searchInput={"init":init};})(jQuery);